<div class="page-wrapper" style="min-height: 283px">
  <!-- Page Content -->
  <div class="content container-fluid">
    <!-- Page Header -->
    <div class="page-header">
      <div class="row align-items-center">
        <div class="col">
          <ul class="breadcrumb">
            <li class="breadcrumb-item">
              <a href="javascript:void(0)">Dashboard</a>
            </li>
            <li class="breadcrumb-item active">Customer</li>
            <li class="breadcrumb-item">
              Edit
              <span *ngIf="company?.companyName"
                >: {{ company.companyName }}
              </span>
            </li>
          </ul>
        </div>
        <div class="col-auto float-right ml-auto">
          <a
            href="javascript:void(0)"
            [routerLink]="['/admin/company/view']"
            [state]="{ companyDetailsId: companyDetailsId }"
            class="btn add-btn"
            ><i class="fa fa-long-arrow-left"></i> Back to view</a
          >
        </div>
      </div>
    </div>
    <!-- /Page Header -->
    <div>
      <p-tabView (onChange)="handleChange($event)" [(activeIndex)]="tabIndex">
        <p-tabPanel header="Customer Details" leftIcon="fa fa-university">
          <ng-template pTemplate="content">
            <form #f="ngForm" (ngSubmit)="saveCompanyDetails()">
              <div class="pt-2">
                <div class="row" *ngIf="errLabel">
                  <div class="col-sm-6" style="color: red">
                    {{ errLabel }}
                  </div>
                </div>
                <div class="card">
                  <div class="card-body">
                    <!-- <h3 class="card-title">Supplier Details</h3> -->
                    <div class="row">
                      <div class="col-sm-6">
                        <div class="form-group">
                          <label class="col-form-label"
                            >Customer Name
                            <span class="text-danger">*</span></label
                          >
                          <input
                            pInputText
                            class="form-control"
                            (blur)="checkCompanyAlreadyExist()"
                            name="companyName"
                            [(ngModel)]="company.companyName"
                            placeholder="Customer Name"
                            type="text"
                            maxlength="150"
                            required
                            (keypress)="
                              sharedService.keyPressProject_SupplierName($event)
                            "
                          />
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div class="form-group">
                          <label class="col-form-label">EIN Number </label>
                          <p-inputMask
                            id="ssnno"
                            mask="99-9999999"
                            [(ngModel)]="company.einNumber"
                            name="einNumber"
                            unmask="true"
                          ></p-inputMask>
                          <!-- <input
                            pInputText
                            class="form-control"
                            name="einNumber"
                            [(ngModel)]="company.einNumber"
                            placeholder="EIN Number"
                            maxlength="50"
                            type="text"
                            pattern="[0-9-]{1,15}"
                            (keypress)="sharedService.keyPressEIN($event)"
                          /> -->
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div class="form-group">
                          <label class="col-form-label">Description </label>
                          <textarea
                            cols="6"
                            class="form-control"
                            [(ngModel)]="company.description"
                            name="desc"
                            maxlength="2500"
                            placeholder="Enter your description here......."
                            (keypress)="sharedService.keyPressAddress($event)"
                          ></textarea>
                        </div>
                      </div>

                      <div class="col-sm-6">
                        <div class="form-group">
                          <label class="col-form-label"
                            >Customer Address
                            <span class="text-danger">*</span></label
                          >
                          <textarea
                            class="form-control"
                            [(ngModel)]="company.companyAddress"
                            name="companyAddress"
                            maxlength="1000"
                            placeholder="Enter Address here......."
                            cols="6"
                            (keypress)="sharedService.keyPressAddress($event)"
                          ></textarea>
                        </div>
                      </div>
                      <div class="col-sm-4">
                        <div class="form-group">
                          <label class="col-form-label"
                            >Customer Website
                            <span class="text-danger">*</span></label
                          >
                          <input
                            pInputText
                            class="form-control"
                            [(ngModel)]="company.companyWebsite"
                            name="companyWebsite"
                            placeholder="Customer Website"
                            type="text"
                            maxlength="150"
                            required
                            pattern="^((https?|ftp|smtp):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$"
                            (keypress)="sharedService.keyPressWebsite($event)"
                          />
                        </div>
                      </div>
                      <div class="col-sm-4">
                        <div class="form-group">
                          <label class="col-form-label"
                            >Net Due <span class="text-danger">*</span></label
                          >
                          <p-dropdown
                            [options]="creditDaysOptions"
                            name="netDue"
                            [(ngModel)]="company.creditDays"
                            required
                            [filter]="true"
                            placeholder="Select Net Due"
                          ></p-dropdown>
                        </div>
                      </div>
                      <div class="col-sm-4">
                        <div class="form-group">
                          <label class="col-form-label"
                            >Invoice Notification Config
                            <span class="text-danger">*</span></label
                          >
                          <div>
                            <div class="form-check form-check-inline">
                              <input
                                class="form-check-input"
                                type="radio"
                                name="invoiceNotificationConfig"
                                value="1"
                                checked
                                [(ngModel)]="company.invoiceNotificationConfig"
                                required
                              />
                              <label
                                class="form-check-label"
                                for="invoiceNotificationConfig"
                                >By Authorization Code</label
                              >
                            </div>
                            <div class="form-check form-check-inline">
                              <input
                                class="form-check-input"
                                type="radio"
                                name="invoiceNotificationConfig"
                                value="2"
                                [(ngModel)]="company.invoiceNotificationConfig"
                              />
                              <label
                                class="form-check-label"
                                for="invoiceNotificationConfig"
                                >By email reply</label
                              >
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="submit-section">
                <button
                  type="submit"
                  [disabled]="!company.companyName || !f.valid"
                  class="btn btn-success"
                >
                  <i class="fa fa-save"></i>&nbsp;Save
                </button>
                <a
                  href="javascript:void(0)"
                  [routerLink]="['/admin/company/view']"
                  [state]="{ companyDetailsId: companyDetailsId }"
                  class="btn btn-danger ml-2"
                  ><i class="fa fa-times"></i>&nbsp;Cancel</a
                >
              </div>
            </form>
          </ng-template>
        </p-tabPanel>
        <p-tabPanel header="Approvers" leftIcon="fa fa-check-square-o">
          <ng-container *ngIf="tabIndex == 1">
            <app-assign-company-approver [companyDetailsId]="companyDetailsId">
            </app-assign-company-approver>
          </ng-container>
        </p-tabPanel>
        <p-tabPanel header="Payments" leftIcon="fa fa-money">
          <div class="pt-2">
            <app-company-payments
              [companyDetailsId]="companyDetailsId"
            ></app-company-payments>
          </div>
        </p-tabPanel>
        <p-tabPanel header="Comments" leftIcon="fa fa-comments">
          <div class="comments">
            <div class="chat-main-row">
              <!-- Chat Main Wrapper -->
              <div class="chat-main-wrapper">
                <!-- Chats View -->
                <div class="col-lg-12 message-view task-view">
                  <div class="chat-window">
                    <div class="chat-contents">
                      <div class="chat-content-wrap">
                        <div class="chat-wrap-inner">
                          <div class="chat-box">
                            <div class="chats">
                              <ng-container *ngFor="let comment of commentList">
                                <div class="chat chat-left mb-2">
                                  <div class="chat-body">
                                    <div class="chat-bubble">
                                      <div class="chat-content">
                                        <p>
                                          <strong
                                            >{{ comment.employeeName }}.
                                            <span
                                              style="
                                                font-size: 12px;
                                                font-weight: 400;
                                              "
                                              >{{
                                                comment.commentDateTime
                                              }}</span
                                            >
                                          </strong>
                                          <!-- <strong
                                            style="
                                              float: right;
                                              font-weight: 400;
                                              font-size: 12px;
                                            "
                                            ><i
                                              class="fa fa-dot-circle-o text-info mr-1"
                                            ></i
                                            >{{
                                              comment.commentType == "1"
                                                ? "Private"
                                                : "Customer"
                                            }}</strong
                                          > -->
                                        </p>

                                        <p>
                                          {{ comment.comment }}
                                        </p>
                                      </div>
                                      <div class="chat-action-btns">
                                        <ul class="m-0">
                                          <li>
                                            <a
                                              href="javascript:void(0)"
                                              class="edit-msg"
                                              (click)="editComment(comment)"
                                              ><i class="fa fa-pencil"></i
                                            ></a>
                                          </li>
                                          <li>
                                            <a
                                              href="javascript:void(0)"
                                              class="del-msg"
                                              data-toggle="modal"
                                              data-target="#confirmModel"
                                              (click)="deleteComment(comment)"
                                              ><i class="fa fa-trash-o"></i
                                            ></a>
                                          </li>
                                        </ul>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </ng-container>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="chat-footer pt-2 pb-0">
                      <div class="message-bar">
                        <div class="message-inner">
                          <div class="message-area">
                            <div class="d-flex">
                              <div
                                class="d-flex align-items-center"
                                style="width: 20%; display: none !important"
                              >
                                <p-selectButton
                                  [options]="messageType"
                                  [(ngModel)]="commentDetails.commentType"
                                  name="messageType"
                                ></p-selectButton>
                              </div>
                              <div class="input-group">
                                <textarea
                                  class="form-control"
                                  placeholder="Type message..."
                                  [(ngModel)]="commentDetails.comment"
                                  (keypress)="
                                    sharedService.keyPressAddress($event)
                                  "
                                ></textarea>
                                <span class="input-group-append">
                                  <button
                                    class="btn btn-custom"
                                    type="button"
                                    (click)="saveComment(commentDetails)"
                                  >
                                    <i class="fa fa-send"></i>
                                  </button>
                                </span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- /Chats View -->
              </div>
              <!-- /Chat Main Wrapper -->
            </div>
          </div>
        </p-tabPanel>
        <p-tabPanel header="Invoices" leftIcon="fa fa-briefcase">
          <div class="pt-2" style="font-size: 85%">
            <div class="col pl-0 pr-0" *ngIf="!loading">
              <p-table
                [columns]="invoicesCols"
                [value]="invoicesList"
                [rowsPerPageOptions]="[5, 10, 25, 50]"
                styleClass="ui-table-customers"
                #dt
                [paginator]="true"
                [rows]="5"
                [showCurrentPageReport]="true"
                [alwaysShowPaginator]="false"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                [filterDelay]="0"
                [globalFilterFields]="['department', 'description', 'status']"
                class="invoice-list"
              >
                <ng-template pTemplate="header" let-columns>
                  <tr>
                    <th
                      *ngFor="let col of columns"
                      [pSortableColumn]="col.field"
                    >
                      {{ col.header }}
                      <p-sortIcon [field]="col.field"></p-sortIcon>
                    </th>
                  </tr>
                </ng-template>
                <ng-template
                  pTemplate="body"
                  let-rowData
                  let-columns="columns"
                  let-rowIndex="rowIndex"
                >
                  <tr
                    [pSelectableRow]="rowData"
                    [ngClass]="rowData.dueDatePassed ? 'mark' : 'unmark'"
                  >
                    <td
                      *ngFor="let col of columns"
                      [attr.ng-reflect-field]="col.field"
                    >
                      <ng-container *ngIf="col.field == 'paymentStatus'">
                        <div
                          class="d-flex align-items-center"
                          pTooltip="{{ rowData.comments }}"
                          tooltipPosition="top"
                        >
                          <div>
                            <span
                              class="badge bg-inverse-orange"
                              *ngIf="
                                rowData.paymentStatus.toLowerCase() == 'waiting'
                              "
                            >
                              {{ rowData[col.field] || "-" }}
                            </span>

                            <span
                              class="badge bg-inverse-red"
                              *ngIf="
                                rowData.paymentStatus.toLowerCase() ==
                                'due date passed'
                              "
                              >{{ rowData[col.field] }}</span
                            >
                            <span
                              class="badge bg-inverse-green"
                              *ngIf="
                                rowData.paymentStatus.toLowerCase() ==
                                'partially paid'
                              "
                              >{{ rowData[col.field] }}</span
                            >
                            <span
                              class="badge bg-inverse-blue"
                              *ngIf="
                                rowData.paymentStatus.toLowerCase() == 'paid'
                              "
                              >{{ rowData[col.field] }}</span
                            >
                          </div>
                          <div>
                            <span
                              (click)="viewStatusComment(rowData.comments)"
                              *ngIf="rowData.comments != null"
                              class="d-flex align-items-center comment-info"
                            >
                              <i
                                class="fa fa-info-circle ml-3"
                                aria-hidden="true"
                              ></i
                            ></span>
                          </div>
                        </div>
                      </ng-container>
                      <ng-container *ngIf="col.field == 'invoiceNumber'">
                        <!-- <a
                          [routerLink]="['/admin/invoices/invoice/view']"
                          [state]="{
                            invoiceDetailsId: rowData.invoiceDetailsId
                          }"
                          ># {{ rowData[col.field] }}</a
                        > -->
                        # {{ rowData[col.field] }}
                      </ng-container>
                      <ng-container
                        *ngIf="
                          col.field != 'paymentStatus' &&
                          col.field != 'invoiceNumber'
                        "
                      >
                        {{ rowData[col.field] }}
                      </ng-container>
                    </td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td
                      [attr.colspan]="invoicesCols.length"
                      style="text-align: center"
                    >
                      No Records found.
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </div>
        </p-tabPanel>
        <p-tabPanel header="Documents" leftIcon="fa fa-files-o">
          <div class="pt-2">
            <div class="clearfix">
              <a
                href="javascript:void(0)"
                class="btn add-btn"
                (click)="uploadDocCatg()"
                ><i class="fa fa-upload"></i> Upload Document</a
              >
            </div>
            <div class="col pl-0 pr-0 mt-2" *ngIf="!loading">
              <p-table
                [columns]="projectDocCols"
                [value]="documentList"
                [rowsPerPageOptions]="[5, 10, 25, 50]"
                styleClass="ui-table-customers doc"
                #dt
                [paginator]="true"
                [rows]="5"
                [showCurrentPageReport]="true"
                [alwaysShowPaginator]="false"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                [filterDelay]="0"
                [globalFilterFields]="[]"
              >
                <ng-template pTemplate="header" let-columns>
                  <tr>
                    <th
                      *ngFor="let col of columns"
                      [pSortableColumn]="col.field"
                    >
                      {{ col.header }}
                      <p-sortIcon [field]="col.field"></p-sortIcon>
                    </th>
                    <th class="actions">Actions</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-columns="columns">
                  <tr [pSelectableRow]="rowData">
                    <td
                      *ngFor="let col of columns"
                      [attr.ng-reflect-field]="col.field"
                    >
                      <ng-container *ngIf="col.field == 'documentTitle'">
                        <a
                          href="javascript:void(0)"
                          (click)="onImageViewOpenClick(rowData)"
                        >
                          {{ rowData[col.field] }}</a
                        >
                      </ng-container>
                      <ng-container *ngIf="col.field == 'alertRequired'"
                        >{{ +rowData[col.field] ? "Yes" : "No" }}
                      </ng-container>
                      <ng-container *ngIf="col.field == 'alertBeforeNoOfDays'">
                        <ng-container *ngIf="+rowData.alertRequired">
                          {{ rowData[col.field] }}
                        </ng-container>
                      </ng-container>
                      <ng-container *ngIf="col.field == 'sharedWithOthers'">
                        <ng-container *ngIf="!rowData[col.field]">
                          <i class="fa fa-dot-circle-o"></i>
                          {{ rowData[col.field] }}
                        </ng-container>
                        <ng-container *ngIf="rowData[col.field]">
                          <a
                            href="javascript:void(0)"
                            data-toggle="modal"
                            class="is-shared"
                            (click)="taggedDocumentModel(rowData)"
                            ><i class="fa fa-dot-circle-o"></i>
                            {{ rowData[col.field] }}
                          </a>
                        </ng-container>
                      </ng-container>
                      <ng-container
                        *ngIf="
                          col.field != 'alertRequired' &&
                          col.field != 'alertBeforeNoOfDays' &&
                          col.field != 'sharedWithOthers' &&
                          col.field != 'documentTitle'
                        "
                      >
                        {{ rowData[col.field] }}
                      </ng-container>
                    </td>
                    <td class="actions">
                      <div class="d-flex justify-content-center">
                        <a
                          href="javascript:void(0)"
                          data-toggle="modal"
                          (click)="fileToDownload(rowData)"
                          ><i class="fa fa-download m-r-5"></i>
                        </a>
                        <a
                          href="javascript:void(0)"
                          data-toggle="modal"
                          (click)="editUploadDoc(rowData)"
                          ><i
                            class="fa fa-pencil-square-o m-r-5 text-success"
                          ></i>
                        </a>
                        <a
                          href="javascript:void(0)"
                          class="text-danger"
                          data-toggle="modal"
                          data-target="#confirmModel"
                          (click)="fileToDeleteDocument(rowData)"
                          ><i class="fa fa-trash-o m-r-5"></i>
                        </a>
                      </div>
                    </td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td
                      [attr.colspan]="projectDocCols.length"
                      style="text-align: center"
                    >
                      No Records found.
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </div>
        </p-tabPanel>
        <p-tabPanel header="Employees Worked" leftIcon="fa fa-id-badge">
          <div class="pt-2">
            <div class="col pl-0 pr-0" *ngIf="!loading">
              <p-table
                [columns]="employeeWorkCols"
                [value]="employeesWorkList"
                [rowsPerPageOptions]="[5, 10, 25, 50]"
                styleClass="ui-table-customers"
                #dt
                [paginator]="true"
                [rows]="5"
                [showCurrentPageReport]="true"
                [alwaysShowPaginator]="false"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                [filterDelay]="0"
                [globalFilterFields]="['department', 'description', 'status']"
              >
                <ng-template pTemplate="header" let-columns>
                  <tr>
                    <th
                      *ngFor="let col of columns"
                      [pSortableColumn]="col.field"
                    >
                      {{ col.header }}
                      <p-sortIcon [field]="col.field"></p-sortIcon>
                    </th>
                    <th style="width: 10%">Status</th>
                  </tr>
                </ng-template>
                <ng-template
                  pTemplate="body"
                  let-rowData
                  let-columns="columns"
                  let-rowIndex="rowIndex"
                >
                  <tr [pSelectableRow]="rowData">
                    <td *ngFor="let col of columns">
                      {{ rowData[col.field] }}
                    </td>
                    <td>
                      <ng-container *ngIf="rowData.endDate">
                        <span class="badge bg-inverse-completed">COMPLETE</span>
                      </ng-container>
                      <ng-container *ngIf="!rowData.endDate">
                        <span class="badge bg-inverse-in-progress"
                          >IN PROGRESS</span
                        >
                      </ng-container>
                    </td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td
                      [attr.colspan]="employeeWorkCols.length"
                      style="text-align: center"
                    >
                      No Records found.
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </div>
        </p-tabPanel>
        <p-tabPanel header="Customer Contacts" leftIcon="fa fa-address-card">
          <form
            (ngSubmit)="saveCompanyContactDetails(contactDetailsForm)"
            #contactDetailsForm="ngForm"
          >
            <div class="card mt-2">
              <div class="card-body">
                <!-- <h3 class="card-title">Contact Details</h3> -->
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label class="col-form-label"
                        >Contact Name <span class="text-danger">*</span></label
                      >
                      <input
                        pInputText
                        class="form-control"
                        name="companyContactName"
                        [(ngModel)]="companyContacts.contactName"
                        placeholder=""
                        type="text"
                        maxlength="150"
                        required
                        (keypress)="sharedService.keyPressAlphabet($event)"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label class="col-form-label"
                        >Contact Title <span class="text-danger">*</span></label
                      >
                      <input
                        pInputText
                        class="form-control"
                        name="companyContactTitle"
                        [(ngModel)]="companyContacts.contactTitle"
                        placeholder=""
                        type="text"
                        maxlength="150"
                        required
                        (keypress)="sharedService.keyPressAlphabet($event)"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label class="col-form-label"
                        >Email <span class="text-danger">*</span></label
                      >
                      <input
                        pInputText
                        class="form-control"
                        name="companyContactEmail"
                        [(ngModel)]="companyContacts.contactEmail"
                        placeholder=""
                        type="email"
                        maxlength="150"
                        required
                        (keypress)="sharedService.keyPressEmail($event)"
                        pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label class="col-form-label"
                        >Mobile <span class="text-danger">*</span></label
                      >
                      <input
                        pInputText
                        class="form-control"
                        name="companyContactPhone"
                        [(ngModel)]="companyContacts.contactPhone"
                        placeholder=""
                        type="text"
                        maxlength="10"
                        pattern="[0-9]{10,15}"
                        (keypress)="sharedService.keyPressNumber($event)"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label class="col-form-label">Office Number </label>
                      <div class="row">
                        <div class="col-sm-8">
                          <input
                            pInputText
                            class="form-control"
                            [(ngModel)]="companyContacts.contactLandline"
                            name="companyContactLandline"
                            placeholder="Office Number"
                            type="text"
                            maxlength="15"
                            (keypress)="sharedService.keyPressNumber($event)"
                          />
                        </div>
                        <div class="col-sm-4">
                          <input
                            pInputText
                            class="form-control"
                            name="companyContactLandlineExtn"
                            [(ngModel)]="companyContacts.contactLandlineExtn"
                            placeholder="Extn"
                            type="text"
                            maxlength="5"
                            pattern="[0-9]{1,5}"
                            (keypress)="sharedService.keyPressNumber($event)"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- <div class="add-more" class="float-right">
                  <a
                    href="javascript:void(0);"
                    (click)="onAddMoreContact(index)"
                    *ngIf="company.companyContacts.length == index + 1"
                    ><i class="fa fa-plus-circle"></i> Add More</a
                  >
                </div> -->
              </div>
            </div>
            <div class="submit-section">
              <button
                type="submit"
                [disabled]="!contactDetailsForm.valid"
                class="btn btn-success"
              >
                <i class="fa fa-save"></i>&nbsp;Save
              </button>
              <a
                href="javascript:void(0)"
                [routerLink]="['/admin/company/view']"
                [state]="{ companyDetailsId: companyDetailsId }"
                class="btn btn-danger ml-2"
                ><i class="fa fa-times"></i>&nbsp;Cancel</a
              >
            </div>
          </form>
          <div class="">
            <div class="col pl-0 pr-0 pt-3" *ngIf="!loading">
              <p-table
                [columns]="supplierContactCols"
                [value]="supplierContactList"
                [rowsPerPageOptions]="[5, 10, 25, 50]"
                styleClass="ui-table-customers"
                class="supplier-details"
                #dt
                [paginator]="true"
                [rows]="5"
                [showCurrentPageReport]="true"
                [alwaysShowPaginator]="false"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                [filterDelay]="0"
                [globalFilterFields]="['department', 'description', 'status']"
              >
                <ng-template pTemplate="header" let-columns>
                  <tr>
                    <th
                      *ngFor="let col of columns"
                      [pSortableColumn]="col.field"
                    >
                      {{ col.header }}
                      <p-sortIcon [field]="col.field"></p-sortIcon>
                    </th>
                    <th class="actions" style="width: 7%">Actions</th>
                  </tr>
                </ng-template>
                <ng-template
                  pTemplate="body"
                  let-rowData
                  let-columns="columns"
                  let-rowIndex="rowIndex"
                >
                  <tr [pSelectableRow]="rowData">
                    <td *ngFor="let col of columns">
                      {{ rowData[col.field] }}
                    </td>
                    <td class="actions">
                      <div class="d-flex justify-content-center">
                        <a
                          href="javascript:void(0)"
                          data-toggle="modal"
                          (click)="editCompanyContact(rowData)"
                          ><i
                            class="fa fa-pencil-square-o m-r-5 text-success"
                          ></i>
                        </a>
                      </div>
                    </td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td
                      [attr.colspan]="supplierContactCols.length"
                      style="text-align: center"
                    >
                      No Records found.
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </div>
        </p-tabPanel>
      </p-tabView>
    </div>
  </div>
  <!-- /Page Content -->
</div>

<!-- Upload File Modal -->
<div
  id="uploadFile_info"
  [ngStyle]="{ display: uploadFileInfo }"
  class="modal custom-modal backdrop"
  role="dialog"
  *ngIf="uploadFileInfo == 'block'"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Upload Document</h5>
        <button
          type="button"
          class="close"
          (click)="closeAddmodal()"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="card m-0">
          <form
            (ngSubmit)="saveUploadFile(fileUpload, f)"
            #f="ngForm"
            class="card-body pt-0"
          >
            <div class="row" *ngIf="errorLabel">
              <div class="col-sm-12" style="color: red">
                {{ errorLabel }}
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <div class="form-group">
                  <label class="col-form-label"
                    >Document Title <span class="text-danger">*</span></label
                  >
                  <input
                    class="form-control"
                    name="documentTitle"
                    [(ngModel)]="fileUpload.documentTitle"
                    type="text"
                    required
                    (keypress)="sharedService.keyPressAlphabet($event)"
                  />
                </div>
              </div>
              <div class="col-sm-6">
                <div class="form-group">
                  <label class="col-form-label">Document Number </label>
                  <input
                    class="form-control"
                    name="documentNumber"
                    [(ngModel)]="fileUpload.documentNumber"
                    type="text"
                    (keypress)="sharedService.keyPressAlphaNumaric($event)"
                  />
                </div>
              </div>
              <div class="col-sm-6">
                <div class="form-group">
                  <label class="col-form-label">Document Expiry Date </label>
                  <p-calendar
                    name="documentExpiryDate"
                    [(ngModel)]="fileUpload.documentExpiryDate"
                    showIcon="true"
                    dateFormat="mm-dd-yy"
                    dataType="string"
                  ></p-calendar>
                </div>
              </div>
              <div class="col-sm-12">
                <div class="form-group">
                  <label class="col-form-label"
                    >File To Upload
                    <span class="text-danger" *ngIf="!fileUploadEdit"
                      >*</span
                    ></label
                  >
                  <div class="d-flex align-items-center">
                    <input
                      (change)="onFileChange($event)"
                      name="fileToUpload"
                      class="form-control"
                      type="file"
                      required
                      #fileInput
                    />
                    <div *ngIf="fileUpload.fileToUpload">
                      <a
                        class="btn btn-danger btn-clear-file"
                        href="javascript:void(0)"
                        aria-label="Remove"
                        (click)="clearFile()"
                      >
                        <i class="fa fa-times" aria-hidden="true"></i>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
              <div
                [ngClass]="{
                  'col-sm-4': fileUpload.checked == true,
                  'col-sm-12': fileUpload.checked == false
                }"
              >
                <div class="form-group">
                  <label class="col-form-label">Alert Required</label>
                  <div>
                    <p-inputSwitch
                      name="alertRequired"
                      [(ngModel)]="fileUpload.checked"
                    ></p-inputSwitch>
                  </div>
                </div>
              </div>
              <div class="col-sm-8" *ngIf="fileUpload.checked">
                <div class="form-group">
                  <label class="col-form-label"
                    >Alert Before No Of Days
                    <span class="text-danger">*</span></label
                  >
                  <p-dropdown
                    name="alertBeforeNoOfDays"
                    [options]="noOfAlertsList"
                    [(ngModel)]="fileUpload.alertBeforeNoOfDays"
                    required
                    [filter]="true"
                  ></p-dropdown>
                </div>
              </div>
              <div
                class="col-sm-12"
                *ngIf="projectOfSupplierList && projectOfSupplierList.length"
              >
                <div class="form-group">
                  <label class="col-form-label"
                    >Tag Projects
                    <span class="tag-note"
                      >This document will be linked to project section</span
                    ></label
                  >
                  <div>
                    <p-multiSelect
                      name="taggedProjects"
                      [options]="projectOfSupplierList"
                      [showToggleAll]="false"
                      [(ngModel)]="selectedProjectOfSupplierList"
                      [virtualScroll]="true"
                      [filter]="true"
                      [itemSize]="34"
                      optionLabel="projectName"
                      optionValue="projectCode"
                      class="multiselect-custom-virtual-scroll"
                      (onChange)="hadleTaggedProjects($event)"
                    >
                    </p-multiSelect>
                  </div>
                </div>
              </div>
              <div
                class="col-sm-12"
                *ngIf="
                  selectedProjectOfSupplierList &&
                  selectedProjectOfSupplierList.length &&
                  employeesOfSupplierList &&
                  employeesOfSupplierList.length
                "
              >
                <div class="form-group">
                  <label class="col-form-label"
                    >Tag Employees
                    <span class="tag-note"
                      >This Document will be shared to the below
                      Employee(s)</span
                    ></label
                  >
                  <p-multiSelect
                    name="taggedEmployees"
                    [options]="employeesOfSupplierList"
                    [showToggleAll]="false"
                    [(ngModel)]="selectedEmployeesOfSupplierList"
                    [virtualScroll]="true"
                    [filter]="true"
                    [itemSize]="34"
                    optionLabel="employeeName"
                    optionValue="employeeCode"
                    class="multiselect-custom-virtual-scroll"
                  >
                  </p-multiSelect>
                </div>
              </div>
            </div>

            <div class="submit-section">
              <button
                *ngIf="fileUploadEdit"
                type="submit"
                class="btn btn-info"
                [disabled]="!f.valid"
              >
                <i class="fa fa-upload"></i>&nbsp;Update
              </button>
              <button
                *ngIf="!fileUploadEdit"
                type="submit"
                class="btn btn-success"
                [disabled]="!f.valid || !fileUpload.fileToUpload"
              >
                <i class="fa fa-upload"></i>&nbsp;Upload
              </button>
              <button
                type="button"
                class="btn btn-danger ml-2"
                (click)="closeAddmodal()"
              >
                <i class="fa fa-times"></i>&nbsp;Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /Upload file Modal -->
<!-- confirm model-->
<div
  class="modal custom-modal fade"
  id="confirmModel"
  role="dialog"
  aria-modal="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body">
        <div class="form-header">
          <h3>Confirm</h3>
          <p>Are you sure ? Do you want to Delete ?</p>
        </div>
        <div class="modal-btn delete-action">
          <div class="row">
            <div class="col-6">
              <a
                href="javascript:void(0);"
                data-dismiss="modal"
                (click)="confirm(confirmType)"
                class="btn btn-info continue-btn"
                ><i class="fa fa-check"></i>&nbsp;Confirm</a
              >
            </div>
            <div class="col-6">
              <a
                href="javascript:void(0);"
                data-dismiss="modal"
                class="btn btn-danger cancel-btn"
                ><i class="fa fa-times"></i>&nbsp;Cancel</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /confirm model-->
<!-- Status View model -->
<div
  id="statusView_info"
  [ngStyle]="{ display: statusViewModel }"
  class="modal custom-modal backdrop"
  role="dialog"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button
          type="button"
          class="close"
          (click)="closeAddmodal()"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body" style="padding-top: 0px">
        <div class="form-header">
          <h3>Comments</h3>
          <p>{{ comments }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /Status View model -->
<!-- Tagged Documents Modal -->
<div
  id="uploadFile_info"
  [ngStyle]="{ display: taggedModelInfo }"
  class="modal custom-modal backdrop"
  role="dialog"
  *ngIf="taggedModelInfo == 'block'"
>
  <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tagged Details</h5>
        <button
          type="button"
          class="close"
          (click)="closeAddmodal()"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        <app-tagged-or-shared-supplier-documents
          [companyDocumentDetailsId]="selectedCompanyDocumentDetailsId"
        ></app-tagged-or-shared-supplier-documents>
      </div>
    </div>
  </div>
</div>
<!-- /Tagged Documents Modal -->
<!-- Image view file Modal -->
<ng-container *ngIf="viewImage">
  <app-imageviwer
    [imageBlob]="imageBlob"
    (onClose)="onImageViewCloseClick($event)"
  >
  </app-imageviwer>
</ng-container>

<!-- /Image view file Modal -->
